<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Typewriter — Canvas Page + Local Save (CPI/Ink% + Line Height + Zoom)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="ruler" id="rulerH_host">
    <div class="ruler-ticks"></div>
    <div id="rulerH_stops_container"></div>
  </div>
  <div class="ruler-v" id="rulerV_host">
    <div class="ruler-v-ticks"></div>
    <div id="rulerV_stops_container"></div>
  </div>

  <div class="zoom-controls" id="zoomControls">
    <div class="slider" id="zoomSlider">
      <div class="track" id="zoomTrack">
        <div class="fill" id="zoomFill"></div>
      </div>
      <div class="thumb" id="zoomThumb" aria-label="Zoom handle" title="Zoom 50–400%"></div>
    </div>
    <div id="zoomIndicator">100%</div>
  </div>

  <div id="stage" class="stage">
    <div class="zoom-wrap" id="zoomWrap">
      <div class="stage-inner" id="stageInner">
        <div class="page-wrap" data-page="0">
          <div id="page" class="page">
            <canvas></canvas>
            <div id="marginBox" class="margin-box"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="guideV" class="guide"></div>
  <div id="guideH" class="guide"></div>

  <div class="toolbar">
    <button class="btn" id="inkBlackBtn" title="Black"><span class="sw black"></span></button>
    <button class="btn" id="inkRedBtn"   title="Red"><span class="sw red"></span></button>
    <button class="btn" id="inkWhiteBtn" title="White (Eraser)"><span class="sw white"></span></button>
    <button class="btn" id="toggleMarginsBtn" title="Toggle rulers">Margins</button>
    <button class="btn" id="settingsBtn">Settings</button>

    <div class="ctl" title="Characters per inch">
      <label for="cpiSelect">CPI</label>
      <select id="cpiSelect">
        <option value="10">10</option>
        <option value="12">12</option>
      </select>
    </div>
    <div class="ctl" title="Computed columns across the page">
      <label>Cols ≈</label>
      <span id="colsPreview" style="min-width:48px;display:inline-block;text-align:right">82.68</span>
    </div>

    <div class="ctl" title="Inked glyph width as % of pitch">
      <label for="sizeInput">Size</label>
      <input id="sizeInput" type="number" step="0.01" value="84.00" />
    </div>
    <button class="btn" id="applyBtn" title="Apply CPI & size">Apply</button>

    <div class="ctl">
      <label for="lhInput">Line height</label>
      <input id="lhInput" type="number" step="0.5" min="1" max="3" value="1" />
    </div>
    <button class="btn" id="applyLHBtn" title="Apply line height">Apply LH</button>

    <div class="ctl" title="Show/hide margin rectangle">
      <label for="showMarginBoxCb">Margin box</label>
      <input id="showMarginBoxCb" type="checkbox" />
    </div>

    <div style="flex:1"></div>
    <button class="btn" id="newDocBtn">New</button>
    <button class="btn" id="exportTxtBtn">Export</button>
  </div>

  <dialog id="settingsModal" class="settings-modal" aria-hidden="true">
    <div class="settings-panel">
      <div class="settings-header">
        <div style="font-weight:600">Settings</div>
      </div>
      <div class="settings-body">
        <div class="settings-group">
          <div style="font-weight:600; margin-bottom:6px;">Fonts</div>

          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020Base" />
            <span class="font-sample" style='font-family:"TT2020Base", Courier, "Courier New", monospace;'>TT2020 Base — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020StyleB" />
            <span class="font-sample" style='font-family:"TT2020StyleB", Courier, "Courier New", monospace;'>TT2020 Style B — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020StyleD" />
            <span class="font-sample" style='font-family:"TT2020StyleD", Courier, "Courier New", monospace;'>TT2020 Style D — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020StyleE" checked />
            <span class="font-sample" style='font-family:"TT2020StyleE", Courier, "Courier New", monospace;'>TT2020 Style E — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020StyleF" />
            <span class="font-sample" style='font-family:"TT2020StyleF", Courier, "Courier New", monospace;'>TT2020 Style F — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="TT2020StyleG" />
            <span class="font-sample" style='font-family:"TT2020StyleG", Courier, "Courier New", monospace;'>TT2020 Style G — The quick brown fox 123456</span>
          </label>

          <label class="font-option">
            <input type="radio" name="fontChoice" value="Courier New" />
            <span class="font-sample" style='font-family:"Courier New", monospace;'>Courier New — The quick brown fox 123456</span>
          </label>
          <label class="font-option">
            <input type="radio" name="fontChoice" value="Courier" />
            <span class="font-sample" style='font-family:Courier, "Courier New", monospace;'>Courier — The quick brown fox 123456</span>
          </label>
        </div>

        <div class="settings-group">
          <div style="font-weight:600; margin-bottom:6px;">Margins (mm)</div>
          <div class="mm-grid">
            <div>
              <label for="mmLeft">Left</label>
              <input id="mmLeft" type="number" step="1" min="0" value="20" />
            </div>
            <div>
              <label for="mmRight">Right</label>
              <input id="mmRight" type="number" step="1" min="0" value="20" />
            </div>
            <div>
              <label for="mmTop">Top</label>
              <input id="mmTop" type="number" step="1" min="0" value="20" />
            </div>
            <div>
              <label for="mmBottom">Bottom</label>
              <input id="mmBottom" type="number" step="1" min="0" value="20" />
            </div>
          </div>
        </div>
      </div>
      <div class="settings-footer">
        <button class="btn" id="settingsCloseBtn2">Done</button>
      </div>
    </div>
  </dialog>

  <script defer src="js/app.js"></script>
</body>
</html>
